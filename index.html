<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Presente Simple - App</title>
  <style>
    :root{
      --bg1:#eaf3ff;
      --bg2:#cfe6ff;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --shadow: 0 12px 30px rgba(2, 6, 23, .10);
      --radius: 18px;

      --green:#22c55e;
      --blue:#3b82f6;
      --orange:#f59e0b;
      --purple:#8b5cf6;

      --accent: rgba(59,130,246,.35);

      --okbg: rgba(34,197,94,.10);
      --okbd: rgba(34,197,94,.35);
      --badbg: rgba(239,68,68,.10);
      --badbd: rgba(239,68,68,.35);
      --warnbg: rgba(245,158,11,.12);
      --warnbd: rgba(245,158,11,.35);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 22px;
    }

    .app{
      width:min(980px, 100%);
      background: rgba(255,255,255,.35);
      border: 1px solid rgba(255,255,255,.55);
      border-radius: calc(var(--radius) + 10px);
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(8px);
      position: relative;
    }

    .topbar{
      display:flex;
      align-items:center;
      gap:12px;
      padding: 18px 18px;
      background: rgba(255,255,255,.6);
      border-bottom: 1px solid rgba(15,23,42,.08);
    }
    .back-btn{
      border:0;
      background: var(--card);
      border: 1px solid rgba(15,23,42,.10);
      border-radius: 999px;
      padding: 10px 14px;
      cursor:pointer;
      font-weight: 700;
      transition: transform .08s ease;
    }
    .back-btn:active{ transform: scale(.98); }

    .screen-title{
      font-size: 16px;
      font-weight: 900;
      letter-spacing: .2px;
    }

    .content{ padding: 20px; }

    /* Home */
    .home{
      padding: 40px 22px 28px;
      text-align:center;
    }
    .logo{
      width:84px;
      height:84px;
      margin: 0 auto 14px;
      border-radius: 22px;
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(15,23,42,.08);
      display:grid;
      place-items:center;
      font-size: 40px;
      box-shadow: 0 8px 20px rgba(2,6,23,.10);
    }
    h1{
      margin: 6px 0 6px;
      font-size: clamp(26px, 4vw, 38px);
      line-height:1.1;
      letter-spacing: .2px;
    }
    .subtitle{
      margin: 0 auto 10px;
      color: var(--muted);
      font-weight: 700;
    }
    .helper{
      margin: 0 auto 22px;
      color: var(--muted);
      font-weight: 600;
      font-size: 14px;
      max-width: 680px;
    }

    .btn-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      width: min(560px, 100%);
      margin: 0 auto;
    }
    @media (min-width: 760px){
      .btn-grid{ grid-template-columns: 1fr 1fr; }
    }
    .nav-btn{
      display:flex;
      align-items:center;
      gap: 12px;
      padding: 16px 16px;
      border-radius: 16px;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.80);
      cursor:pointer;
      font-weight: 900;
      font-size: 16px;
      box-shadow: 0 8px 20px rgba(2,6,23,.08);
      transition: transform .08s ease;
      text-align:left;
    }
    .nav-btn:active{ transform: scale(.99); }
    .chip{
      width:40px;
      height:40px;
      display:grid;
      place-items:center;
      border-radius: 12px;
      color: #fff;
      font-size: 20px;
      flex: 0 0 40px;
    }
    .chip.green{ background: var(--green); }
    .chip.blue{ background: var(--blue); }
    .chip.orange{ background: var(--orange); }
    .chip.purple{ background: var(--purple); }

    .footer-note{
      margin-top: 18px;
      color: var(--muted);
      font-size: 13px;
    }

    /* Cards & Tables */
    .section{ display:grid; gap: 14px; }
    .card{
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(15,23,42,.10);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: 0 10px 24px rgba(2,6,23,.07);
    }
    .card h2{
      margin: 0 0 10px;
      font-size: 18px;
    }
    .muted{ color: var(--muted); }

    .tag{
      display:inline-block;
      font-size: 12px;
      font-weight: 900;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.9);
      margin-bottom: 8px;
    }

    table{
      width:100%;
      border-collapse: separate;
      border-spacing: 0;
      overflow:hidden;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,.10);
      background: #fff;
    }
    th, td{
      padding: 12px 12px;
      border-bottom: 1px solid rgba(15,23,42,.08);
      vertical-align: top;
      font-size: 14px;
    }
    th{
      text-align:left;
      background: rgba(15,23,42,.04);
      font-weight: 900;
    }
    tr:last-child td{ border-bottom:0; }

    /* Tabs */
    .tabs{
      display:flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 12px;
    }
    .tab{
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.85);
      padding: 10px 12px;
      border-radius: 999px;
      cursor:pointer;
      font-weight: 900;
      font-size: 14px;
    }
    .tab.active{ outline: 2px solid var(--accent); }

    .word-grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 10px;
    }
    @media (min-width: 760px){
      .word-grid{ grid-template-columns: repeat(3, minmax(0,1fr)); }
    }

    .word{
      padding: 12px 12px;
      border-radius: 14px;
      background: rgba(15,23,42,.04);
      border: 1px solid rgba(15,23,42,.08);
      font-weight: 900;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .word small{
      font-weight: 800;
      color: var(--muted);
    }

    .pills{
      display:flex;
      flex-wrap:wrap;
      gap: 8px;
      margin-top: 10px;
    }
    .pill{
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(15,23,42,.06);
      border: 1px solid rgba(15,23,42,.08);
      font-weight: 900;
      font-size: 13px;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }

    /* Clickable learning items */
    .tap{
      cursor:pointer;
      user-select:none;
      border-radius: 14px;
      outline: none;
      transition: transform .06s ease;
    }
    .tap:active{ transform: scale(.99); }

    .example-line{
      display:flex;
      flex-direction:column;
      gap: 6px;
    }
    .example-en{
      font-size: 16px;
      font-weight: 900;
    }
    .example-tip{
      font-size: 12px;
      font-weight: 800;
      color: var(--muted);
    }

    /* Hide/Show screens */
    .screen{ display:none; }
    .screen.active{ display:block; }

    /* Modal */
    .modal-overlay{
      position: fixed;
      inset: 0;
      background: rgba(2,6,23,.45);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 1000;
    }
    .modal-overlay.show{ display:flex; }

    .modal{
      width: min(520px, 100%);
      background: rgba(255,255,255,.95);
      border: 1px solid rgba(15,23,42,.12);
      border-radius: 18px;
      box-shadow: 0 18px 50px rgba(2,6,23,.20);
      padding: 16px;
      backdrop-filter: blur(8px);
    }
    .modal-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 10px;
    }
    .modal-title{
      font-weight: 900;
      font-size: 14px;
      color: var(--muted);
      letter-spacing:.2px;
    }
    .modal-close{
      border: 0;
      cursor: pointer;
      background: rgba(15,23,42,.06);
      border: 1px solid rgba(15,23,42,.10);
      border-radius: 999px;
      padding: 8px 12px;
      font-weight: 900;
    }
    .modal-body{
      font-size: 18px;
      font-weight: 900;
      line-height: 1.25;
      padding: 10px 12px;
      background: rgba(15,23,42,.04);
      border: 1px dashed rgba(15,23,42,.12);
      border-radius: 14px;
      color: var(--text);
      word-break: break-word;
    }
    .modal-foot{
      margin-top: 10px;
      font-size: 12px;
      font-weight: 800;
      color: var(--muted);
      text-align: right;
    }

    /* Activities UI */
    .game-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    @media (min-width: 760px){
      .game-grid{ grid-template-columns: 1fr 1fr; }
    }
    .game-btn{
      display:flex;
      gap: 12px;
      align-items:flex-start;
      padding: 16px;
      border-radius: 16px;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.85);
      cursor:pointer;
      font-weight: 900;
      box-shadow: 0 8px 20px rgba(2,6,23,.08);
      transition: transform .08s ease;
      text-align:left;
    }
    .game-btn:active{ transform: scale(.99); }
    .game-btn:disabled{
      opacity: .55;
      cursor:not-allowed;
    }
    .game-meta{
      display:flex;
      flex-direction:column;
      gap: 4px;
    }
    .game-desc{
      font-size: 13px;
      font-weight: 700;
      color: var(--muted);
      line-height: 1.25;
    }
    .badge{
      display:inline-block;
      margin-top: 6px;
      font-size: 12px;
      font-weight: 900;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(15,23,42,.04);
      width: fit-content;
    }

    .game-panel{ display:none; }
    .game-panel.show{ display:block; }

    .rule-line{
      font-size: 16px;
      font-weight: 900;
      line-height: 1.35;
    }
    .blank{
      width: 140px;
      max-width: 46vw;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(15,23,42,.15);
      background: rgba(255,255,255,.95);
      font-weight: 900;
      font-size: 16px;
      outline: none;
    }
    .blank:focus{
      box-shadow: 0 0 0 3px var(--accent);
      border-color: rgba(59,130,246,.35);
    }

    .rule-controls{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }
    .btn{
      border: 0;
      cursor: pointer;
      border-radius: 999px;
      padding: 10px 14px;
      font-weight: 900;
      border: 1px solid rgba(15,23,42,.12);
      background: rgba(255,255,255,.9);
    }
    .btn.primary{
      background: rgba(59,130,246,.12);
      border-color: rgba(59,130,246,.35);
    }
    .btn:disabled{
      opacity: .55;
      cursor:not-allowed;
    }

    .status{
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 900;
      display:none;
      border: 1px solid transparent;
    }
    .status.show{ display:block; }
    .status.ok{ background: var(--okbg); border-color: var(--okbd); }
    .status.bad{ background: var(--badbg); border-color: var(--badbd); }
    .status.warn{ background: var(--warnbg); border-color: var(--warnbd); }

    .progress{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      color: var(--muted);
      font-weight: 900;
      font-size: 13px;
      margin-bottom: 10px;
    }

    /* GAME 2 inline sentence */
    .g2-bar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }
    .pillbox{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(15,23,42,.12);
      background: rgba(255,255,255,.9);
      font-weight: 900;
    }
    .pillbox strong{ font-variant-numeric: tabular-nums; }

    .g2-sentence{
      font-size: 18px;
      font-weight: 900;
      line-height: 1.55;
      padding: 12px;
      border-radius: 14px;
      background: rgba(15,23,42,.04);
      border: 1px dashed rgba(15,23,42,.12);
      overflow-wrap: anywhere;
    }
    .g2-sentence input{
      display:inline-block;
      width: 130px;
      max-width: 44vw;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(15,23,42,.18);
      background: rgba(255,255,255,.95);
      font-weight: 900;
      font-size: 16px;
      outline:none;
      vertical-align: baseline;
      margin: 0 6px;
    }
    .g2-sentence input:focus{
      box-shadow: 0 0 0 3px var(--accent);
      border-color: rgba(59,130,246,.35);
    }
    .hint{
      color: var(--muted);
      font-weight: 900;
      margin-left: 6px;
      white-space: nowrap;
    }

    .congrats{
      text-align:center;
      padding: 22px;
    }
    .congrats h3{
      margin: 0 0 6px;
      font-size: 28px;
      letter-spacing:.2px;
    }
    .congrats p{
      margin: 0;
      color: var(--muted);
      font-weight: 800;
    }
  </style>
</head>

<body>
  <div class="app">

    <!-- HOME -->
    <section id="homeScreen" class="screen active">
      <div class="home">
        <div class="logo" aria-hidden="true">üéì</div>

        <h1>Presente Simple</h1>
        <div class="subtitle">Simple Present Tense</div>

        <p class="helper">
          Elige una secci√≥n. Las instrucciones est√°n en espa√±ol, pero los ejemplos y cuadros est√°n en ingl√©s.
          <strong>Tip:</strong> toca ejemplos/palabras/adverbios para ver la traducci√≥n en un mini pop-up.
        </p>

        <div class="btn-grid">
          <button class="nav-btn" data-go="functionScreen">
            <span class="chip green">üó£</span>
            <span>Funci√≥n del lenguaje</span>
          </button>

          <button class="nav-btn" data-go="grammarScreen">
            <span class="chip blue">üìñ</span>
            <span>Explicaci√≥n</span>
          </button>

          <button class="nav-btn" data-go="vocabScreen">
            <span class="chip orange">üìö</span>
            <span>Vocabulario</span>
          </button>

          <button class="nav-btn" data-go="activitiesScreen">
            <span class="chip purple">üéÆ</span>
            <span>Actividades</span>
          </button>
        </div>

        <div class="footer-note">
          Consejo: primero mira ‚ÄúFunci√≥n del lenguaje‚Äù, luego ‚ÄúExplicaci√≥n‚Äù.
        </div>
      </div>
    </section>

    <!-- FUNCI√ìN DEL LENGUAJE -->
    <section id="functionScreen" class="screen">
      <div class="topbar">
        <button class="back-btn" data-back>‚Üê Volver</button>
        <div class="screen-title">Funci√≥n del lenguaje</div>
      </div>

      <div class="content">
        <div class="section">
          <div class="card">
            <h2>¬øPara qu√© sirve el Presente Simple?</h2>
            <p class="muted">
              Se usa para hablar de <strong>rutinas</strong>, <strong>h√°bitos</strong>, <strong>hechos generales</strong>,
              <strong>horarios</strong> y <strong>situaciones permanentes</strong>.
            </p>
            <p class="muted">
              Objetivo comunicativo: decir lo que haces normalmente o lo que es verdad en general.
            </p>
            <p class="muted" style="font-size:13px; font-weight:800;">
              Interacci√≥n: toca cada ejemplo en ingl√©s para ver su traducci√≥n.
            </p>
          </div>

          <div class="card tap js-translate" data-es="Me despierto a las 7 a. m.">
            <span class="tag">‚úÖ Rutinas</span>
            <div class="example-line">
              <div class="example-tip">Ejemplo (ingl√©s) ‚Äî toca:</div>
              <div class="example-en">I <strong>wake up</strong> at 7 a.m.</div>
            </div>
          </div>

          <div class="card tap js-translate" data-es="Ella toma caf√© todos los d√≠as.">
            <span class="tag">‚úÖ H√°bitos</span>
            <div class="example-line">
              <div class="example-tip">Ejemplo (ingl√©s) ‚Äî toca:</div>
              <div class="example-en">She <strong>drinks</strong> coffee every day.</div>
            </div>
          </div>

          <div class="card tap js-translate" data-es="El sol sale por el este.">
            <span class="tag">‚úÖ Hechos generales</span>
            <div class="example-line">
              <div class="example-tip">Ejemplo (ingl√©s) ‚Äî toca:</div>
              <div class="example-en">The sun <strong>rises</strong> in the east.</div>
            </div>
          </div>

          <div class="card tap js-translate" data-es="El tren sale a las 6 p. m.">
            <span class="tag">‚úÖ Horarios fijos</span>
            <div class="example-line">
              <div class="example-tip">Ejemplo (ingl√©s) ‚Äî toca:</div>
              <div class="example-en">The train <strong>leaves</strong> at 6 p.m.</div>
            </div>
          </div>

          <div class="card tap js-translate" data-es="Vivo en Colombia.">
            <span class="tag">‚úÖ Situaciones permanentes</span>
            <div class="example-line">
              <div class="example-tip">Ejemplo (ingl√©s) ‚Äî toca:</div>
              <div class="example-en">I <strong>live</strong> in Colombia.</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- EXPLICACI√ìN -->
    <section id="grammarScreen" class="screen">
      <div class="topbar">
        <button class="back-btn" data-back>‚Üê Volver</button>
        <div class="screen-title">Explicaci√≥n</div>
      </div>

      <div class="content">
        <div class="section">
          <div class="card">
            <h2>¬øC√≥mo funciona gramaticalmente?</h2>
            <p class="muted">
              Lee los t√≠tulos en espa√±ol y mira las estructuras y ejemplos en ingl√©s.
              <strong>Tip:</strong> en los adverbios, toca cada palabra para ver su significado.
            </p>
          </div>

          <div class="card">
            <h2>1) Afirmativa ‚úÖ</h2>
            <table>
              <thead>
                <tr>
                  <th>Subject</th>
                  <th>Verb Form</th>
                  <th>Example</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>I / You / We / They</td>
                  <td>Base form</td>
                  <td>I <strong>play</strong> soccer.</td>
                </tr>
                <tr>
                  <td>He / She / It</td>
                  <td>Verb + <strong>s</strong> / <strong>es</strong></td>
                  <td>She <strong>plays</strong> soccer.</td>
                </tr>
              </tbody>
            </table>
            <p class="muted" style="margin-top:10px;">
              Nota (espa√±ol): Con <strong>he / she / it</strong> normalmente agregas <strong>-s</strong> o <strong>-es</strong>.
            </p>
          </div>

          <div class="card">
            <h2>2) Negativa ‚ùå</h2>
            <table>
              <thead>
                <tr>
                  <th>Subject</th>
                  <th>Auxiliary</th>
                  <th>Verb</th>
                  <th>Example</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>I / You / We / They</td>
                  <td>do not (don‚Äôt)</td>
                  <td>base form</td>
                  <td>I <strong>don‚Äôt</strong> play.</td>
                </tr>
                <tr>
                  <td>He / She / It</td>
                  <td>does not (doesn‚Äôt)</td>
                  <td>base form</td>
                  <td>She <strong>doesn‚Äôt</strong> play.</td>
                </tr>
              </tbody>
            </table>
            <p class="muted" style="margin-top:10px;">
              Nota (espa√±ol): Con <strong>doesn‚Äôt</strong>, el verbo principal queda en <strong>forma base</strong>.
            </p>
          </div>

          <div class="card">
            <h2>3) Interrogativa ‚ùì</h2>
            <table>
              <thead>
                <tr>
                  <th>Auxiliary</th>
                  <th>Subject</th>
                  <th>Verb</th>
                  <th>Example</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Do</td>
                  <td>I / you / we / they</td>
                  <td>base form</td>
                  <td><strong>Do</strong> you <strong>play</strong>?</td>
                </tr>
                <tr>
                  <td>Does</td>
                  <td>he / she / it</td>
                  <td>base form</td>
                  <td><strong>Does</strong> she <strong>play</strong>?</td>
                </tr>
              </tbody>
            </table>
            <p class="muted" style="margin-top:10px;">
              Nota (espa√±ol): Para preguntas usamos <strong>Do/Does</strong> + sujeto + verbo en base.
            </p>
          </div>

          <div class="card">
            <h2>Adverbios de frecuencia ‚è±</h2>
            <p class="muted">
              Son palabras que dicen ‚Äúcon qu√© frecuencia‚Äù haces algo. Toca cada adverbio:
            </p>

            <div class="pills">
              <span class="pill tap js-translate" data-es="Siempre">Always</span>
              <span class="pill tap js-translate" data-es="Usualmente / Normalmente">Usually</span>
              <span class="pill tap js-translate" data-es="A menudo / Frecuentemente">Often</span>
              <span class="pill tap js-translate" data-es="A veces">Sometimes</span>
              <span class="pill tap js-translate" data-es="Nunca">Never</span>
            </div>

            <p style="margin-top:10px;">
              Example (English): She <strong>always</strong> studies at night.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- VOCABULARIO -->
    <section id="vocabScreen" class="screen">
      <div class="topbar">
        <button class="back-btn" data-back>‚Üê Volver</button>
        <div class="screen-title">Vocabulario</div>
      </div>

      <div class="content">
        <div class="card">
          <h2>Palabras b√°sicas para practicar</h2>
          <p class="muted">Toca una palabra en ingl√©s para ver su significado.</p>

          <div class="tabs" role="tablist" aria-label="Categor√≠as de vocabulario">
            <button class="tab active" data-tab="verbsTab" role="tab" aria-selected="true">Verbos</button>
            <button class="tab" data-tab="adjectivesTab" role="tab" aria-selected="false">Adjetivos</button>
            <button class="tab" data-tab="ictTab" role="tab" aria-selected="false">Tecnolog√≠a (TIC)</button>
            <button class="tab" data-tab="freqTab" role="tab" aria-selected="false">Frecuencia</button>
          </div>

          <!-- VERBS -->
          <div id="verbsTab" class="tab-panel">
            <div class="word-grid">
              <div class="word tap js-translate" data-es="jugar">play <small>v.</small></div>
              <div class="word tap js-translate" data-es="comer">eat <small>v.</small></div>
              <div class="word tap js-translate" data-es="estudiar">study <small>v.</small></div>
              <div class="word tap js-translate" data-es="trabajar">work <small>v.</small></div>
              <div class="word tap js-translate" data-es="vivir">live <small>v.</small></div>
              <div class="word tap js-translate" data-es="leer">read <small>v.</small></div>
              <div class="word tap js-translate" data-es="escribir">write <small>v.</small></div>
              <div class="word tap js-translate" data-es="correr">run <small>v.</small></div>
              <div class="word tap js-translate" data-es="hablar">speak <small>v.</small></div>
              <div class="word tap js-translate" data-es="ver / mirar">watch <small>v.</small></div>
              <div class="word tap js-translate" data-es="usar">use <small>v.</small></div>
              <div class="word tap js-translate" data-es="aprender">learn <small>v.</small></div>
              <div class="word tap js-translate" data-es="ir">go <small>v.</small></div>
              <div class="word tap js-translate" data-es="venir">come <small>v.</small></div>
              <div class="word tap js-translate" data-es="gustar / amar">like <small>v.</small></div>
              <div class="word tap js-translate" data-es="necesitar">need <small>v.</small></div>
              <div class="word tap js-translate" data-es="querer">want <small>v.</small></div>
              <div class="word tap js-translate" data-es="tener">have <small>v.</small></div>
              <div class="word tap js-translate" data-es="hacer">do <small>v.</small></div>
              <div class="word tap js-translate" data-es="dormir">sleep <small>v.</small></div>
              <div class="word tap js-translate" data-es="caminar">walk <small>v.</small></div>
              <div class="word tap js-translate" data-es="conducir / manejar">drive <small>v.</small></div>
              <div class="word tap js-translate" data-es="ver (con los ojos)">see <small>v.</small></div>
              <div class="word tap js-translate" data-es="pensar">think <small>v.</small></div>
            </div>
          </div>

          <!-- ADJECTIVES -->
          <div id="adjectivesTab" class="tab-panel" style="display:none;">
            <div class="word-grid">
              <div class="word tap js-translate" data-es="feliz">happy <small>adj.</small></div>
              <div class="word tap js-translate" data-es="cansado/a">tired <small>adj.</small></div>
              <div class="word tap js-translate" data-es="ocupado/a">busy <small>adj.</small></div>
              <div class="word tap js-translate" data-es="inteligente">intelligent <small>adj.</small></div>
              <div class="word tap js-translate" data-es="joven">young <small>adj.</small></div>
              <div class="word tap js-translate" data-es="viejo/a">old <small>adj.</small></div>
              <div class="word tap js-translate" data-es="r√°pido/a">fast <small>adj.</small></div>
              <div class="word tap js-translate" data-es="lento/a">slow <small>adj.</small></div>
              <div class="word tap js-translate" data-es="amable">friendly <small>adj.</small></div>
              <div class="word tap js-translate" data-es="creativo/a">creative <small>adj.</small></div>
              <div class="word tap js-translate" data-es="organizado/a">organized <small>adj.</small></div>
              <div class="word tap js-translate" data-es="curioso/a">curious <small>adj.</small></div>
              <div class="word tap js-translate" data-es="bueno/a">good <small>adj.</small></div>
              <div class="word tap js-translate" data-es="malo/a">bad <small>adj.</small></div>
              <div class="word tap js-translate" data-es="grande">big <small>adj.</small></div>
              <div class="word tap js-translate" data-es="peque√±o/a">small <small>adj.</small></div>
              <div class="word tap js-translate" data-es="nuevo/a">new <small>adj.</small></div>
              <div class="word tap js-translate" data-es="anticuado/a">old-fashioned <small>adj.</small></div>
              <div class="word tap js-translate" data-es="f√°cil">easy <small>adj.</small></div>
              <div class="word tap js-translate" data-es="dif√≠cil">difficult <small>adj.</small></div>
              <div class="word tap js-translate" data-es="importante">important <small>adj.</small></div>
              <div class="word tap js-translate" data-es="interesante">interesting <small>adj.</small></div>
              <div class="word tap js-translate" data-es="fuerte">strong <small>adj.</small></div>
              <div class="word tap js-translate" data-es="d√©bil">weak <small>adj.</small></div>
            </div>
          </div>

          <!-- ICT -->
          <div id="ictTab" class="tab-panel" style="display:none;">
            <div class="word-grid">
              <div class="word tap js-translate" data-es="computador / computadora">computer <small>n.</small></div>
              <div class="word tap js-translate" data-es="internet">internet <small>n.</small></div>
              <div class="word tap js-translate" data-es="software">software <small>n.</small></div>
              <div class="word tap js-translate" data-es="hardware">hardware <small>n.</small></div>
              <div class="word tap js-translate" data-es="correo electr√≥nico">email <small>n.</small></div>
              <div class="word tap js-translate" data-es="sitio web / p√°gina web">website <small>n.</small></div>
              <div class="word tap js-translate" data-es="aplicaci√≥n">app <small>n.</small></div>
              <div class="word tap js-translate" data-es="teclado">keyboard <small>n.</small></div>
              <div class="word tap js-translate" data-es="pantalla">screen <small>n.</small></div>
              <div class="word tap js-translate" data-es="red">network <small>n.</small></div>
              <div class="word tap js-translate" data-es="contrase√±a">password <small>n.</small></div>
              <div class="word tap js-translate" data-es="nube">cloud <small>n.</small></div>
              <div class="word tap js-translate" data-es="archivo">file <small>n.</small></div>
              <div class="word tap js-translate" data-es="carpeta">folder <small>n.</small></div>
              <div class="word tap js-translate" data-es="enlace / v√≠nculo">link <small>n.</small></div>
              <div class="word tap js-translate" data-es="descargar">download <small>v.</small></div>
              <div class="word tap js-translate" data-es="subir (a internet)">upload <small>v.</small></div>
              <div class="word tap js-translate" data-es="iniciar sesi√≥n">log in <small>v.</small></div>
              <div class="word tap js-translate" data-es="cerrar sesi√≥n">log out <small>v.</small></div>
              <div class="word tap js-translate" data-es="actualizar">update <small>v.</small></div>
              <div class="word tap js-translate" data-es="enviar mensaje">message <small>v.</small></div>
              <div class="word tap js-translate" data-es="navegador">browser <small>n.</small></div>
              <div class="word tap js-translate" data-es="buscador">search engine <small>n.</small></div>
              <div class="word tap js-translate" data-es="videollamada">video call <small>n.</small></div>
            </div>
          </div>

          <!-- FREQUENCY -->
          <div id="freqTab" class="tab-panel" style="display:none;">
            <p class="muted" style="margin: 0 0 10px;">
              Adverbios de frecuencia (en ingl√©s). Toca para ver espa√±ol.
            </p>
            <div class="word-grid">
              <div class="word tap js-translate" data-es="Siempre">always <small>adv.</small></div>
              <div class="word tap js-translate" data-es="Usualmente / Normalmente">usually <small>adv.</small></div>
              <div class="word tap js-translate" data-es="A menudo / Frecuentemente">often <small>adv.</small></div>
              <div class="word tap js-translate" data-es="A veces">sometimes <small>adv.</small></div>
              <div class="word tap js-translate" data-es="Nunca">never <small>adv.</small></div>
              <div class="word tap js-translate" data-es="Casi siempre">almost always <small>adv.</small></div>
              <div class="word tap js-translate" data-es="Casi nunca">hardly ever <small>adv.</small></div>
              <div class="word tap js-translate" data-es="De vez en cuando">occasionally <small>adv.</small></div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- ACTIVIDADES -->
    <section id="activitiesScreen" class="screen">
      <div class="topbar">
        <button class="back-btn" data-back>‚Üê Volver</button>
        <div class="screen-title">Actividades</div>
      </div>

      <div class="content">
        <div class="section">

          <!-- MEN√ö -->
          <div id="gamesMenu" class="card">
            <h2>Elige un juego</h2>
            <p class="muted">Empieza con el Juego 1. Luego juega el Juego 2 (racha 15/15).</p>

            <div class="game-grid" style="margin-top:12px;">
              <button class="game-btn" id="startGame1">
                <div class="chip purple" style="flex:0 0 40px;">1</div>
                <div class="game-meta">
                  <div>Juego 1: Completa la regla</div>
                  <div class="game-desc">Escribe la(s) palabra(s) que faltan en cada regla.</div>
                  <span class="badge">Nivel: muy b√°sico</span>
                </div>
              </button>

              <button class="game-btn" id="openGame2">
                <div class="chip purple" style="flex:0 0 40px;">2</div>
                <div class="game-meta">
                  <div>Juego 2: Auxiliar + Verbo</div>
                  <div class="game-desc">START inicia toda la racha. 20 segundos por oraci√≥n. Si fallas, vuelves al inicio.</div>
                  <span class="badge">Racha 15/15</span>
                </div>
              </button>

              <button class="game-btn" disabled title="Pr√≥ximamente">
                <div class="chip purple" style="flex:0 0 40px;">3</div>
                <div class="game-meta">
                  <div>Juego 3: Pr√≥ximamente</div>
                  <div class="game-desc">M√°s juegos pronto.</div>
                  <span class="badge">Pr√≥ximamente</span>
                </div>
              </button>

              <button class="game-btn" disabled title="Pr√≥ximamente">
                <div class="chip purple" style="flex:0 0 40px;">4</div>
                <div class="game-meta">
                  <div>Juego 4: Pr√≥ximamente</div>
                  <div class="game-desc">M√°s juegos pronto.</div>
                  <span class="badge">Pr√≥ximamente</span>
                </div>
              </button>
            </div>
          </div>

          <!-- JUEGO 1 -->
          <div id="game1Panel" class="card game-panel">
            <div class="progress">
              <div><strong>Juego 1:</strong> Completa la regla</div>
              <div id="game1Progress">1 / 6</div>
            </div>

            <p class="muted" style="margin-top:0;">
              Escribe lo que falta. Luego presiona <strong>Comprobar</strong>.
            </p>

            <div id="ruleContainer" class="rule-line" style="margin-top:10px;"></div>

            <div class="rule-controls">
              <button class="btn primary" id="checkRuleBtn">Comprobar</button>
              <button class="btn" id="nextRuleBtn" disabled>Siguiente</button>
              <button class="btn" id="restartGame1Btn">Reiniciar</button>
              <button class="btn" id="exitGame1Btn">Salir</button>
            </div>

            <div id="statusBox" class="status"></div>
          </div>

          <!-- JUEGO 2 -->
          <div id="game2Panel" class="card game-panel">
            <div class="g2-bar">
              <div class="pillbox">üî• Racha: <strong id="g2Streak">0</strong>/15</div>
              <div class="pillbox">‚è± Tiempo: <strong id="g2Time">20</strong>s</div>
            </div>

            <p class="muted" style="margin-top:0;">
              Presiona <strong>START</strong> para iniciar toda la racha.
              Luego escribe en los espacios y presiona <strong>Comprobar</strong>.
            </p>

            <div id="g2Sentence" class="g2-sentence"></div>

            <div class="rule-controls">
              <button class="btn primary" id="g2StartBtn">START</button>
              <button class="btn primary" id="g2CheckBtn" disabled>Comprobar</button>
              <button class="btn" id="g2RestartBtn">Reiniciar</button>
              <button class="btn" id="g2ExitBtn">Salir</button>
            </div>

            <div id="g2Status" class="status"></div>
          </div>

          <!-- CONGRATS (Juego 2) -->
          <div id="g2WinPanel" class="card game-panel">
            <div class="congrats">
              <div style="font-size:48px;">üèÜ</div>
              <h3>Congratulations!</h3>
              <p>¬°Lograste 15/15!</p>
              <div class="rule-controls" style="justify-content:center; margin-top:14px;">
                <button class="btn primary" id="g2PlayAgainBtn">Jugar otra vez</button>
                <button class="btn" id="g2WinExitBtn">Volver al men√∫</button>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

  </div>

  <!-- MODAL -->
  <div id="modalOverlay" class="modal-overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-header">
        <div id="modalTitle" class="modal-title">Traducci√≥n</div>
        <button id="modalClose" class="modal-close" aria-label="Cerrar">Cerrar</button>
      </div>
      <div id="modalBody" class="modal-body"></div>
      <div class="modal-foot">Toca fuera del cuadro o ‚ÄúCerrar‚Äù</div>
    </div>
  </div>

  <script>
    // ========= NAVEGACI√ìN ENTRE PANTALLAS =========
    const screens = Array.from(document.querySelectorAll(".screen"));
    function showScreen(id){
      screens.forEach(s => s.classList.remove("active"));
      const el = document.getElementById(id);
      if(el) el.classList.add("active");
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    // ========= MODAL (TRADUCCIONES) =========
    const modalOverlay = document.getElementById("modalOverlay");
    const modalBody = document.getElementById("modalBody");
    const modalClose = document.getElementById("modalClose");

    function openModal(text){
      modalBody.textContent = text; // SOLO traducci√≥n
      modalOverlay.classList.add("show");
      modalOverlay.setAttribute("aria-hidden", "false");
      modalClose.focus();
    }
    function closeModal(){
      modalOverlay.classList.remove("show");
      modalOverlay.setAttribute("aria-hidden", "true");
      modalBody.textContent = "";
    }
    modalClose.addEventListener("click", closeModal);
    modalOverlay.addEventListener("click", (e) => {
      if(e.target === modalOverlay) closeModal();
    });
    document.addEventListener("keydown", (e) => {
      if(e.key === "Escape" && modalOverlay.classList.contains("show")) closeModal();
    });

    // ========= UTIL =========
    function normalize(str){
      return (str || "")
        .trim()
        .toLowerCase()
        .replace(/\s+/g, " ");
    }
    function showStatus(el, type, text){
      el.className = `status show ${type}`;
      el.textContent = text;
      el.style.display = "block";
    }
    function clearStatus(el){
      el.className = "status";
      el.textContent = "";
      el.style.display = "none";
    }

    // ========= CLICK HANDLER GLOBAL (tabs + navegaci√≥n + traducciones) =========
    document.addEventListener("click", (e) => {
      const goBtn = e.target.closest("[data-go]");
      const backBtn = e.target.closest("[data-back]");
      const tabBtn = e.target.closest(".tab");
      const translatable = e.target.closest(".js-translate");

      if(goBtn){
        showScreen(goBtn.dataset.go);
        return;
      }
      if(backBtn){
        showScreen("homeScreen");
        return;
      }

      if(tabBtn){
        const tabId = tabBtn.dataset.tab;

        document.querySelectorAll(".tab").forEach(t => {
          t.classList.remove("active");
          t.setAttribute("aria-selected", "false");
        });
        tabBtn.classList.add("active");
        tabBtn.setAttribute("aria-selected", "true");

        document.querySelectorAll(".tab-panel").forEach(p => p.style.display = "none");
        const panel = document.getElementById(tabId);
        if(panel) panel.style.display = "block";
        return;
      }

      if(translatable){
        const es = translatable.getAttribute("data-es");
        if(es) openModal(es);
      }
    });

    // ========= ACTIVITIES PANELS =========
    const gamesMenu = document.getElementById("gamesMenu");
    const game1Panel = document.getElementById("game1Panel");
    const game2Panel = document.getElementById("game2Panel");
    const g2WinPanel = document.getElementById("g2WinPanel");

    function showMenu(){
      gamesMenu.style.display = "block";
      game1Panel.classList.remove("show");
      game2Panel.classList.remove("show");
      g2WinPanel.classList.remove("show");
      stopG2Timer();
      g2Started = false;
    }

    // ========= JUEGO 1 =========
    const startGame1 = document.getElementById("startGame1");
    const ruleContainer = document.getElementById("ruleContainer");
    const game1Progress = document.getElementById("game1Progress");
    const checkRuleBtn = document.getElementById("checkRuleBtn");
    const nextRuleBtn = document.getElementById("nextRuleBtn");
    const restartGame1Btn = document.getElementById("restartGame1Btn");
    const exitGame1Btn = document.getElementById("exitGame1Btn");
    const statusBox = document.getElementById("statusBox");

    const rules = [
      {
        parts: [
          "Cuando el pronombre es una tercera persona (he/she/it), se debe agregar ",
          { blank: true, placeholder: "?" },
          " o ",
          { blank: true, placeholder: "?" },
          " al verbo principal."
        ],
        unorderedSet: ["s","es"],
        feedbackOk: "¬°Correcto! Con he/she/it agregamos -s o -es."
      },
      {
        parts: ["En negativa con he/she/it usamos ", { blank:true, placeholder:"?" }, " + verbo en forma base."],
        answers: [["doesn't","doesnt","does not"]],
        feedbackOk: "¬°Bien! He/She/It ‚Üí doesn't / does not + base form."
      },
      {
        parts: ["En preguntas con he/she/it usamos ", { blank:true, placeholder:"?" }, " + subject + base verb."],
        answers: [["does"]],
        feedbackOk: "¬°Correcto! He/She/It ‚Üí Does + subject + base verb."
      },
      {
        parts: ["En negativa con I/you/we/they usamos ", { blank:true, placeholder:"?" }, " + verbo en forma base."],
        answers: [["don't","dont","do not"]],
        feedbackOk: "¬°Correcto! I/You/We/They ‚Üí don't / do not + base form."
      },
      {
        parts: ["En preguntas con I/you/we/they usamos ", { blank:true, placeholder:"?" }, " + subject + base verb."],
        answers: [["do"]],
        feedbackOk: "¬°Bien! I/You/We/They ‚Üí Do + subject + base verb."
      },
      {
        parts: ["Despu√©s de do/does, el verbo principal queda en forma ", { blank:true, placeholder:"?" }, "."],
        answers: [["base"]],
        feedbackOk: "¬°Excelente! Do/Does + base verb (sin -s)."
      }
    ];

    let currentRuleIndex = 0;

    function renderRule(index){
      clearStatus(statusBox);
      nextRuleBtn.disabled = true;
      game1Progress.textContent = `${index + 1} / ${rules.length}`;

      const rule = rules[index];
      let html = "";
      let blanks = 0;
      rule.parts.forEach(part => {
        if(typeof part === "string") html += part;
        else if(part.blank){
          html += ` <input class="blank" id="blank_${blanks}" autocomplete="off" inputmode="text" placeholder="${part.placeholder}"> `;
          blanks++;
        }
      });
      ruleContainer.innerHTML = html;

      const first = document.getElementById("blank_0");
      if(first) first.focus();
    }

    function checkRule(){
      const rule = rules[currentRuleIndex];
      const inputs = Array.from(ruleContainer.querySelectorAll(".blank"));
      const user = inputs.map(i => normalize(i.value));

      if(user.some(x => x.length === 0)){
        showStatus(statusBox,"bad","Completa todos los espacios.");
        return;
      }

      if(rule.unorderedSet){
        const expected = rule.unorderedSet.map(normalize).sort().join("|");
        const got = user.slice().sort().join("|");
        if(expected === got){
          showStatus(statusBox,"ok",rule.feedbackOk);
          nextRuleBtn.disabled = false;
        } else {
          showStatus(statusBox,"bad","No es correcto. Intenta otra vez.");
        }
        return;
      }

      let ok = true;
      for(let i=0;i<rule.answers.length;i++){
        const acceptable = rule.answers[i].map(normalize);
        if(!acceptable.includes(user[i] || "")){ ok = false; break; }
      }
      if(ok){
        showStatus(statusBox,"ok",rule.feedbackOk);
        nextRuleBtn.disabled = false;
      } else {
        showStatus(statusBox,"bad","No es correcto. Intenta otra vez.");
      }
    }

    function nextRule(){
      if(currentRuleIndex < rules.length - 1){
        currentRuleIndex++;
        renderRule(currentRuleIndex);
      } else {
        ruleContainer.innerHTML = `<div style="font-size:18px; font-weight:900;">¬°Terminaste! ‚úÖ</div>
          <div class="muted" style="margin-top:8px; font-weight:800;">
            Puedes presionar ‚ÄúReiniciar‚Äù para practicar otra vez.
          </div>`;
        showStatus(statusBox,"ok","Muy bien. Completaste todas las reglas.");
        nextRuleBtn.disabled = true;
      }
    }

    function startGameOne(){
      gamesMenu.style.display = "none";
      game2Panel.classList.remove("show");
      g2WinPanel.classList.remove("show");
      game1Panel.classList.add("show");
      currentRuleIndex = 0;
      renderRule(currentRuleIndex);
    }
    function exitGameOne(){
      game1Panel.classList.remove("show");
      showMenu();
    }
    function restartGameOne(){
      currentRuleIndex = 0;
      renderRule(currentRuleIndex);
    }

    startGame1.addEventListener("click", startGameOne);
    checkRuleBtn.addEventListener("click", checkRule);
    nextRuleBtn.addEventListener("click", nextRule);
    restartGame1Btn.addEventListener("click", restartGameOne);
    exitGame1Btn.addEventListener("click", exitGameOne);

    // ========= JUEGO 2 =========
    const openGame2 = document.getElementById("openGame2");
    const g2Sentence = document.getElementById("g2Sentence");
    const g2StartBtn = document.getElementById("g2StartBtn");
    const g2CheckBtn = document.getElementById("g2CheckBtn");
    const g2RestartBtn = document.getElementById("g2RestartBtn");
    const g2ExitBtn = document.getElementById("g2ExitBtn");
    const g2Status = document.getElementById("g2Status");
    const g2StreakEl = document.getElementById("g2Streak");
    const g2TimeEl = document.getElementById("g2Time");
    const g2PlayAgainBtn = document.getElementById("g2PlayAgainBtn");
    const g2WinExitBtn = document.getElementById("g2WinExitBtn");

    // Tus 15 frases
    const g2Items = [
      { mode:"affirm", subject:"Sharon", hint:"(drink)", rest:"coffee every morning.", verb:["drinks"] },
      { mode:"affirm", subject:"The students", hint:"(play)", rest:"soccer on Saturdays.", verb:["play"] },
      { mode:"neg", subject:"My sister", hint:"(not/ watch)", rest:"TV at night.", aux:["doesn't","does not","doesnt"], verb:["watch"] },
      { mode:"neg", subject:"My friends and I", hint:"(not/ eat)", rest:"fast food every day.", aux:["don't","do not","dont"], verb:["eat"] },
      { mode:"q", subject:"Tom", hint:"(work)", rest:"on Sundays?", aux:["does"], verb:["work"] },
      { mode:"q", subject:"your neighbors", hint:"(live)", rest:"near here?", aux:["do"], verb:["live"] },
      { mode:"affirm", subject:"Daniel", hint:"(study)", rest:"English after school.", verb:["studies"] },
      { mode:"neg", subject:"The baby", hint:"(not/ sleep)", rest:"inside the crib.", aux:["doesn't","does not","doesnt"], verb:["sleep"] },
      { mode:"affirm", subject:"My parents", hint:"(like)", rest:"chocolate.", verb:["like"] },
      { mode:"q", subject:"Laura", hint:"(drive)", rest:"to work?", aux:["does"], verb:["drive"] },
      { mode:"neg", subject:"The music teacher", hint:"(not/ play)", rest:"the piano.", aux:["doesn't","does not","doesnt"], verb:["play"] },
      { mode:"affirm", subject:"The employees", hint:"(go)", rest:"to the gym on Mondays.", verb:["go"] },
      { mode:"q", subject:"the children", hint:"(travel)", rest:"in summer?", aux:["do"], verb:["travel"] },
      { mode:"affirm", subject:"The weather", hint:"(rain)", rest:"a lot in winter.", verb:["rains"] },
      { mode:"neg", subject:"The new student", hint:"(not/ read)", rest:"books in English.", aux:["doesn't","does not","doesnt"], verb:["read"] },
    ];

    const ROUND_SECONDS = 20;
    let g2Streak = 0;
    let g2Index = 0;
    let g2Time = ROUND_SECONDS;
    let g2Interval = null;
    let g2Locked = false;
    let g2Started = false;

    function setG2Streak(val){
      g2Streak = val;
      g2StreakEl.textContent = String(g2Streak);
    }

    function stopG2Timer(){
      if(g2Interval){
        clearInterval(g2Interval);
        g2Interval = null;
      }
    }

    function startG2Timer(){
      stopG2Timer();
      g2Time = ROUND_SECONDS;
      g2TimeEl.textContent = String(g2Time);
      g2Interval = setInterval(() => {
        g2Time--;
        g2TimeEl.textContent = String(g2Time);
        if(g2Time <= 0){
          failG2("Tiempo terminado. ");
        }
      }, 1000);
    }

    function currentG2Item(){
      return g2Items[g2Index];
    }

    function renderG2Sentence(){
      clearStatus(g2Status);
      g2Locked = false;

      const item = currentG2Item();
      const auxInput = `<input id="g2AuxIn" autocomplete="off" inputmode="text" placeholder="aux">`;
      const verbInput = `<input id="g2VerbIn" autocomplete="off" inputmode="text" placeholder="verb">`;

      let html = "";
      if(item.mode === "affirm"){
        html = `${item.subject} ${verbInput} <span class="hint">${item.hint}</span> ${item.rest}`;
      } else if(item.mode === "neg"){
        html = `${item.subject} ${auxInput} ${verbInput} <span class="hint">${item.hint}</span> ${item.rest}`;
      } else { // q
        html = `${auxInput} ${item.subject} ${verbInput} <span class="hint">${item.hint}</span> ${item.rest}`;
      }
      g2Sentence.innerHTML = html;

      const auxEl = document.getElementById("g2AuxIn");
      const verbEl = document.getElementById("g2VerbIn");

      if(auxEl) auxEl.disabled = !g2Started;
      if(verbEl) verbEl.disabled = !g2Started;

      if(auxEl) auxEl.value = "";
      if(verbEl) verbEl.value = "";

      if(g2Started){
        if(auxEl) auxEl.focus();
        else if(verbEl) verbEl.focus();
      }

      g2StartBtn.disabled = g2Started;
      g2CheckBtn.disabled = !g2Started;

      if(g2Started){
        startG2Timer();
      } else {
        stopG2Timer();
        g2TimeEl.textContent = String(ROUND_SECONDS);
      }
    }

    function winG2(){
      stopG2Timer();
      game2Panel.classList.remove("show");
      g2WinPanel.classList.add("show");
    }

    // ‚úÖ MEJORA: mostrar respuesta correcta 1s antes de reiniciar
    function failG2(prefixMsg){
      if(g2Locked) return;
      g2Locked = true;

      stopG2Timer();

      const item = currentG2Item();
      const correctAux = (item.mode === "affirm") ? "" : (item.aux?.[0] || "");
      const correctVerb = (item.verb?.[0] || "");

      let answerText = "";
      if(item.mode === "affirm"){
        answerText = `Respuesta correcta: ${correctVerb}`;
      } else {
        answerText = `Respuesta correcta: ${correctAux} ${correctVerb}`;
      }

      showStatus(g2Status, "bad", `${prefixMsg}${answerText}`);

      setG2Streak(0);
      g2Index = 0;

      // ‚úÖ espera 1 segundo mostrando la respuesta
      setTimeout(() => {
        if(!game2Panel.classList.contains("show")) return;
        g2Locked = false;
        renderG2Sentence(); // g2Started sigue true -> sigue la racha autom√°ticamente desde 1/15
      }, 1000);
    }

    function checkG2(){
      if(!g2Started || g2Locked) return;

      const item = currentG2Item();
      const auxEl = document.getElementById("g2AuxIn");
      const verbEl = document.getElementById("g2VerbIn");

      const auxIn = normalize(auxEl ? auxEl.value : "");
      const verbIn = normalize(verbEl ? verbEl.value : "");

      if(verbIn.length === 0){
        showStatus(g2Status, "warn", "Escribe el verbo principal.");
        return;
      }
      if(item.mode !== "affirm" && auxIn.length === 0){
        showStatus(g2Status, "warn", "Escribe el auxiliar.");
        return;
      }

      // ‚úÖ MEJORA: acepta does not / do not y variantes sin ap√≥strofe (ya en la lista)
      let auxOk = true;
      if(item.mode !== "affirm"){
        auxOk = (item.aux || []).map(normalize).includes(auxIn);
      }
      const verbOk = (item.verb || []).map(normalize).includes(verbIn);

      if(auxOk && verbOk){
        stopG2Timer();
        showStatus(g2Status, "ok", "¬°Correcto!");
        g2Locked = true;

        setTimeout(() => {
          g2Locked = false;

          if(g2Streak < 14){
            setG2Streak(g2Streak + 1);
            g2Index = g2Streak;
            renderG2Sentence();
          } else {
            setG2Streak(15);
            winG2();
          }
        }, 380);
      } else {
        failG2("Incorrecto. ");
      }
    }

    function startG2Racha(){
      if(g2Started) return;
      g2Started = true;
      clearStatus(g2Status);
      renderG2Sentence();
    }

    function restartG2(){
      stopG2Timer();
      setG2Streak(0);
      g2Index = 0;
      g2Started = false; // reiniciar vuelve a pedir START
      g2TimeEl.textContent = String(ROUND_SECONDS);
      renderG2Sentence();
    }

    function exitG2(){
      stopG2Timer();
      setG2Streak(0);
      g2Index = 0;
      g2Started = false;
      showMenu();
    }

    function playAgainG2(){
      g2WinPanel.classList.remove("show");
      game2Panel.classList.add("show");
      restartG2();
    }

    function openGameTwo(){
      gamesMenu.style.display = "none";
      game1Panel.classList.remove("show");
      g2WinPanel.classList.remove("show");
      game2Panel.classList.add("show");

      setG2Streak(0);
      g2Index = 0;
      g2Started = false;
      renderG2Sentence();
    }

    openGame2.addEventListener("click", openGameTwo);
    g2StartBtn.addEventListener("click", startG2Racha);
    g2CheckBtn.addEventListener("click", checkG2);
    g2RestartBtn.addEventListener("click", restartG2);
    g2ExitBtn.addEventListener("click", exitG2);
    g2PlayAgainBtn.addEventListener("click", playAgainG2);
    g2WinExitBtn.addEventListener("click", exitG2);

    // Enter: si no ha iniciado -> START, si inici√≥ -> CHECK
    document.addEventListener("keydown", (e) => {
      if(game2Panel.classList.contains("show") && e.key === "Enter"){
        if(!g2Started) startG2Racha();
        else checkG2();
      }
    });
  </script>
</body>
</html>
